{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\textLabel.js"],"names":["DOGSTATE","cc","Enum","SLEEP","STAND","RUN","EAT","touchStandText","touchSleepText","touchEatText","firstTouchText","Class","extends","Component","properties","textBg","Node","textLabel","Label","LoveText","TextAsset","init","gameCtl","active","order","playText","dogState","labelFlag","nowTime","Date","firstOpenFlag","playNameText","string","firstTouch","labelActive","boolean","labelDisappear","laterTime","textName","length","randText","Math","floor","random","nowDay","sys","localStorage","setItem","onLoad","getItem","update","dt"],"mappings":"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","file":"textLabel.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["const DOGSTATE = cc.Enum({\r\n    SLEEP: -1,\r\n    STAND: -1,\r\n    RUN: -1,\r\n    EAT: -1,\r\n});\r\n\r\nconst touchStandText = [\"开心!\",\"主人你要经常摸摸我哦\",\"主人你的手好软\",\"汪汪...\",\"主人你真好!\",\"爱你爱你爱你!\",\"好想每天都和你在一起呢\",\r\n                        \"主人是我哒，谁都不许抢!\",\"我...我叫...小狗几?\",\"大狗几是谁呢?\",\"主人你喜欢我吗?\",\"每天都要来看我哦\",\r\n                        \"要记得喂人家吃东西哦,要不然会饿饿\",\"每天喂我一次,就送主人一句情话\"];\r\nconst touchSleepText = [\"啊？主人!?\",\"主人你来啦!\",\"我好想你呀主人\",\"人家刚刚做梦梦到主人了,汪\",\"Wu~~刚刚睡醒~\",\"汪汪汪,吓死我啦\"];\r\nconst touchEatText = [];\r\n\r\nconst firstTouchText = [\"你就是我的新主人吗？\",\"你好漂亮哦，开心！\",\"我忘记自己是怎么到主人手上了\",\"但是我记得之前好像是一个男生在养我\",\r\n                        \"他好像给我取名小狗几？\",\"好傻的名字哦\",\"不管啦，主人求抱抱~~\",\"mua！\",];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        textBg: cc.Node,\r\n        textLabel:cc.Label,\r\n        LoveText: cc.TextAsset,\r\n    },\r\n\r\n    init(gameCtl){\r\n        this.gameCtl = gameCtl;\r\n        this.textBg.active = false;\r\n        this.order = 0;\r\n    },\r\n\r\n    playText(dogState){\r\n        this.textBg.active = true;\r\n        this.labelFlag = 1; // 1 表示文本框的 active == true\r\n        this.nowTime = new Date(); // 用来记录触摸时的时间\r\n        if(dogState == DOGSTATE.SLEEP){\r\n            if(!this.firstOpenFlag){\r\n                this.playNameText(touchSleepText);\r\n            }else{\r\n                this.textLabel.string = \"Emmmm~~谁刚刚动我？\";\r\n            }\r\n        }\r\n        if(dogState == DOGSTATE.STAND){\r\n            if(!this.firstOpenFlag){\r\n                this.playNameText(touchStandText);\r\n            }else{\r\n                this.firstTouch(firstTouchText);\r\n            }\r\n        }\r\n        if(dogState == DOGSTATE.EAT){\r\n            this.textLabel.string = \"Emmm...真好吃...\";\r\n        }\r\n    },\r\n\r\n    labelActive(boolean){\r\n        this.textBg.active = boolean;\r\n        /*if(boolean){\r\n            this.labelFlag = 1;\r\n        }*/\r\n    },\r\n\r\n    labelDisappear(){\r\n        // 自动隐藏文本框\r\n    if(this.labelFlag){\r\n        this.laterTime = new Date();\r\n        if(this.laterTime - this.nowTime >= 5000){\r\n            this.textBg.active = false;\r\n            this.labelFlag = 0;\r\n        }\r\n    }\r\n    },\r\n\r\n    playNameText(textName){\r\n        // 参数为传入的文本文件名\r\n        let length = textName.length;\r\n        let randText = textName[Math.floor(Math.random()*length)];\r\n        this.textLabel.string = randText;\r\n    },\r\n\r\n    firstTouch(firstTouchText){\r\n        // 播放第一次触摸的文本模式\r\n        this.textLabel.string = firstTouchText[this.order];\r\n        this.order++;\r\n        if(this.order == firstTouchText.length){\r\n            this.firstOpenFlag = 0;\r\n            let nowDay = new Date();\r\n            cc.sys.localStorage.setItem(\"lastDay\",nowDay);\r\n            //cc.log(cc.sys.localStorage.getItem(\"lastDay\"));\r\n        }\r\n    },\r\n\r\n    onLoad(){\r\n        if(cc.sys.localStorage.getItem(\"lastDay\") == null){\r\n            this.firstOpenFlag = 1;\r\n        } \r\n    },\r\n\r\n\r\n    update (dt) {\r\n        this.labelDisappear();\r\n    },\r\n});\r\n"]}